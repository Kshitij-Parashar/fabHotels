var myApp=angular.module("myApp",["ui.router"]);myApp.config(function($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/landing"),$stateProvider.state("landing",{url:"/landing",templateUrl:"html/landing.html"})});var myAppDev=angular.module("myAppE2E",["myApp","ngMockE2E"]);myAppDev.run(function($httpBackend,$http){$httpBackend.whenPOST("/Hotels").respond(function(method,url,data){var predictions1=[];return Hotels.forEach(function(hotel){-1!==hotel.name.toLowerCase().indexOf(JSON.parse(data).name.toLowerCase())&&predictions1.push(hotel)}),[200,predictions1,{}]}),$http.get("data.json").then(function(res){Hotels=res.data,setTimeout(function(){$httpBackend.flush()})}),$httpBackend.whenPOST("/Hotels").passThrough(),$httpBackend.whenGET("data.json").passThrough(),$httpBackend.whenGET("html/landing.html").passThrough()}),myApp.service("suggestions",function($http){this.fetchSuggestions=function(val){return $http.post("/Hotels",{name:val})}}),myApp.controller("MainCtrl",function($http,$scope,suggestions){$scope.hotels=[],$scope.newHotel={name:""},$scope.googleSuggests=[],$scope.getHotels=function(val){$scope.hotels=[],val&&suggestions.fetchSuggestions(val).then(function(response){$scope.hotels=response.data})},$scope.getHotels("none"),$scope.getGoogleSuggestions=function(val){if($scope.error=!1,$scope.googleSuggests=[],val){var displaySuggestions=function(predictions,status){if(status!=google.maps.places.PlacesServiceStatus.OK)return $scope.error=!0,void $scope.$digest();$scope.googleSuggests=predictions,$scope.$digest()};(new google.maps.places.AutocompleteService).getQueryPredictions({input:val},displaySuggestions)}}});